# Retrofit movies 

## Обзор

В данном задании необходимо использовать библиотеку Retrofit для обмена данных с веб-сервисом для создания приложения, выводящего информацию о фильмах-новинках, ожидаемых в прокате.

В данном задании вы поработаете со следующими технологиями:
- Retrofit
- Material design
- SwipeRereshLayout
- themoviedb.org API
- Фоновая загрузка изображений с помощью AsyncTask

Данный скелет приложения собирается и запускается. Он отображает список фильмов с максимальный рейтингом.

## Задачи 

1. Переделать на список фильмов-новинок, ожидаемых в прокате. 
2. Фильмы должны возвращаться в случайном порядке.
3. Добавить корректную обработку жеста обновления
4. Добавить загрузку изображений-постеров для фильма.
5. При нажатии на элемент списка фильмов переходить на экран с его полной информацией.

## Инструкции
Подробные инструкции находятся в исходных текстах с пометкой //TODO

### TMDBInterface
Данный интерфейс предназначен для взаимодействия с API сервера http://themoviedb.org

См. примеры запросов на https://www.themoviedb.org/documentation/api/discover

Данный интерфейс используется библиотекой Retrofit для автоматической генерации клиента взаимодействия с сервером. Для этого используются простой класс APIClient. Кроме того вы можете использовать продвинутый класс ServiceGenerator, который поддерживает сохранение cookie и журнализацию.

Необходимо добавить свой метод получения фильмов-новинок по аналогии с методом получения ТОП-а фильмов.

http://api.themoviedb.org/3/movie/upcoming?api_key=###

JSON формат ответа совпадает с выдачей топа фильмов, поэтому модель менять или дополнять не потребуется.

### MoviesAdapter
Данный класс нужен для работы RecyclerView компоненты списка. Для этого он реализует интерфейс RecyclerView.Adapter

Данный адаптер использует паттерн ViewHolder для управления компонентами UI отдельного элемента списка. Поэтому внутри определен класс MovieViewHolder. Подробную информацию о RecyclerView, SwipeRefreshLayout, ViewHolder смотрите в лекциях, документации и других источниках.

#### конструктор MovieViewHolder

Для начала необходимо присвоить переменной poster соответствующий ImageView с помощью метода findViewById.

#### onBindViewHolder

вызывается моделью для отрисовки i-го элемента списка, в качестве параметра передает индекс элемента и ViewHolder. Реализуем загрузку изображений.

1. Используйте метод getPosterPath() для получения относительного пути до изображения постера конкретного фильма
2. Запустите DownloadImageTask для фоновой загрузки изображения.

### MainActivity

#### onCreate
Заменить заголовок приложения на UPCOMING, используя соответствующую константу из ресурсов
 
#### refresh

1. включить анимацию обновления для SwipeRefreshLayout с помощью метода setRefreshing
2. заменить запрос получения топа фильмов на получение списка новинок, ожидаемых в прокате, используя созданный новый метод интерфейса TMDBInterface
3. для наглядности работы механизма обновления списка перемешать полученный от сервера список фильмов с помощью Collections.shuffle(java.util.List) 
4. убрать анимацию обновления для SwipeRefreshLayout с помощью метода setRefreshing как для успешной попытки выполнения запроса, так и для провала.

### DetailsActivity
И, наконец, надо написать собственный класс DetailsActivity для вывода полной информации о фильме.

В целях эффективности и минимизации запросов к серверу было бы правильнее передать полученный объект модели Movie в  активити через интент или даже организовать какое-нибудь кэширование, но для тренировки клиент-серверного взаимодействия DetailsActivity должен получать в интенте только ID фильма. По его ID с помощью API можно получить полную информацию о фильме и вывести на экран.

Не забудьте в классе MoviesAdapter.MovieViewHolder исправить заглушку в методе onBindViewHolder для перехода на DetailsActivity с указанным фильмом.
